{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to <code>flepimop2</code>","text":"<p>The next generation of the flexible epidemic modeling pipeline.</p>"},{"location":"guides/getting-started/","title":"Getting Started","text":"<p>A brief tutorial on how to get started with <code>flepimop2</code>.</p> <pre><code>import math\nfoo = 2 * math.pi\n</code></pre> <p>And then</p> <pre><code>&gt;&gt;&gt; foo\n6.283185307179586\n</code></pre>"},{"location":"reference/cli/","title":"CLI","text":""},{"location":"reference/cli/#flepimop2","title":"flepimop2","text":"<p>flepimop2 - Flexible Epidemic Modeling Pipeline (version 2).</p> <p>Usage:</p> <pre><code>flepimop2 [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> <pre><code>  --version  Show the version and exit.\n  --help     Show this message and exit.\n</code></pre>"},{"location":"reference/cli/#flepimop2-build","title":"flepimop2 build","text":"<p>Compile and build a model defined in a configuration file.</p> <p>Usage:</p> <pre><code>flepimop2 build [OPTIONS] CONFIG\n</code></pre> <p>Options:</p> <pre><code>  --dry-run        Should this command be run using dry run?\n  -v, --verbosity  The verbosity level to use for this command.\n  --help           Show this message and exit.\n</code></pre>"},{"location":"reference/cli/#flepimop2-process","title":"flepimop2 process","text":"<p>Execute a processing step based on a configuration file.</p> <p>The <code>CONFIG</code> argument should point to a valid configuration file.</p> <p>Usage:</p> <pre><code>flepimop2 process [OPTIONS] CONFIG\n</code></pre> <p>Options:</p> <pre><code>  --dry-run        Should this command be run using dry run?\n  -v, --verbosity  The verbosity level to use for this command.\n  --help           Show this message and exit.\n</code></pre>"},{"location":"reference/cli/#flepimop2-simulate","title":"flepimop2 simulate","text":"<p>Run simulations based on a configuration file.</p> <p>This command runs epidemic simulations specified from a provided configuration file. The <code>CONFIG</code> argument should point to a valid configuration file.</p> <p>Usage:</p> <pre><code>flepimop2 simulate [OPTIONS] CONFIG\n</code></pre> <p>Options:</p> <pre><code>  --dry-run        Should this command be run using dry run?\n  -v, --verbosity  The verbosity level to use for this command.\n  --help           Show this message and exit.\n</code></pre>"},{"location":"reference/api/backend/","title":"Backend","text":""},{"location":"reference/api/backend/#flepimop2.backend","title":"<code>backend</code>","text":"<p>Backend module for handling file IO in flepimop2.</p>"},{"location":"reference/api/backend/#flepimop2.backend.BackendABC","title":"<code>BackendABC(backend_model)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for flepimop2 file IO backends.</p> <p>Initialize the backend with the given configuration.</p> <p>Parameters:</p> Name Type Description Default <code>backend_model</code> <code>dict[str, Any]</code> <p>The configuration dictionary for the backend.</p> required Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def __init__(self, backend_model: dict[str, Any]) -&gt; None:  # noqa: B027\n    \"\"\"\n    Initialize the backend with the given configuration.\n\n    Args:\n        backend_model: The configuration dictionary for the backend.\n    \"\"\"\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.BackendABC.read","title":"<code>read(run_meta)</code>","text":"<p>Read a numpy array from storage.</p> <p>Parameters:</p> Name Type Description Default <code>run_meta</code> <code>RunMeta</code> <p>Metadata about the current run.</p> required <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The numpy array read from storage.</p> Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def read(self, run_meta: RunMeta) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Read a numpy array from storage.\n\n    Args:\n        run_meta: Metadata about the current run.\n\n    Returns:\n        The numpy array read from storage.\n    \"\"\"\n    return self._read(run_meta)\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.BackendABC.save","title":"<code>save(data, run_meta)</code>","text":"<p>Save a numpy array to storage.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>NDArray[float64]</code> <p>The numpy array to save.</p> required <code>run_meta</code> <code>RunMeta</code> <p>Metadata about the current run.</p> required Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def save(self, data: NDArray[np.float64], run_meta: RunMeta) -&gt; None:\n    \"\"\"\n    Save a numpy array to storage.\n\n    Args:\n        data: The numpy array to save.\n        run_meta: Metadata about the current run.\n    \"\"\"\n    return self._save(data, run_meta)\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.build","title":"<code>build(config)</code>","text":"<p>Build a <code>BackendABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any]</code> <p>Configuration dictionary. The dict must contains a 'module' key, which will be used to lookup the Backend module path. The module will have \"flepimop2.backend.\" prepended.</p> required <p>Returns:</p> Type Description <code>BackendABC</code> <p>The constructed backend instance.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built backend is not an instance of BackendABC.</p> Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def build(config: dict[str, Any]) -&gt; BackendABC:\n    \"\"\"Build a `BackendABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary. The dict must contains a 'module' key, which\n            will be used to lookup the Backend module path. The module will have\n            \"flepimop2.backend.\" prepended.\n\n    Returns:\n        The constructed backend instance.\n\n    Raises:\n        TypeError: If the built backend is not an instance of BackendABC.\n    \"\"\"\n    builder = _load_builder(f\"flepimop2.backend.{config.pop('module', 'csv')}\")\n    backend = builder.build(**config)\n    if not isinstance(backend, BackendABC):\n        msg = \"The built backend is not an instance of BackendABC.\"\n        raise TypeError(msg)\n    return backend\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.abc","title":"<code>abc</code>","text":"<p>Abstract base class for flepimop2 file IO backends.</p>"},{"location":"reference/api/backend/#flepimop2.backend.abc.BackendABC","title":"<code>BackendABC(backend_model)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for flepimop2 file IO backends.</p> <p>Initialize the backend with the given configuration.</p> <p>Parameters:</p> Name Type Description Default <code>backend_model</code> <code>dict[str, Any]</code> <p>The configuration dictionary for the backend.</p> required Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def __init__(self, backend_model: dict[str, Any]) -&gt; None:  # noqa: B027\n    \"\"\"\n    Initialize the backend with the given configuration.\n\n    Args:\n        backend_model: The configuration dictionary for the backend.\n    \"\"\"\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.abc.BackendABC.read","title":"<code>read(run_meta)</code>","text":"<p>Read a numpy array from storage.</p> <p>Parameters:</p> Name Type Description Default <code>run_meta</code> <code>RunMeta</code> <p>Metadata about the current run.</p> required <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The numpy array read from storage.</p> Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def read(self, run_meta: RunMeta) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Read a numpy array from storage.\n\n    Args:\n        run_meta: Metadata about the current run.\n\n    Returns:\n        The numpy array read from storage.\n    \"\"\"\n    return self._read(run_meta)\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.abc.BackendABC.save","title":"<code>save(data, run_meta)</code>","text":"<p>Save a numpy array to storage.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>NDArray[float64]</code> <p>The numpy array to save.</p> required <code>run_meta</code> <code>RunMeta</code> <p>Metadata about the current run.</p> required Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def save(self, data: NDArray[np.float64], run_meta: RunMeta) -&gt; None:\n    \"\"\"\n    Save a numpy array to storage.\n\n    Args:\n        data: The numpy array to save.\n        run_meta: Metadata about the current run.\n    \"\"\"\n    return self._save(data, run_meta)\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.abc.build","title":"<code>build(config)</code>","text":"<p>Build a <code>BackendABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any]</code> <p>Configuration dictionary. The dict must contains a 'module' key, which will be used to lookup the Backend module path. The module will have \"flepimop2.backend.\" prepended.</p> required <p>Returns:</p> Type Description <code>BackendABC</code> <p>The constructed backend instance.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built backend is not an instance of BackendABC.</p> Source code in <code>src/flepimop2/backend/abc.py</code> <pre><code>def build(config: dict[str, Any]) -&gt; BackendABC:\n    \"\"\"Build a `BackendABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary. The dict must contains a 'module' key, which\n            will be used to lookup the Backend module path. The module will have\n            \"flepimop2.backend.\" prepended.\n\n    Returns:\n        The constructed backend instance.\n\n    Raises:\n        TypeError: If the built backend is not an instance of BackendABC.\n    \"\"\"\n    builder = _load_builder(f\"flepimop2.backend.{config.pop('module', 'csv')}\")\n    backend = builder.build(**config)\n    if not isinstance(backend, BackendABC):\n        msg = \"The built backend is not an instance of BackendABC.\"\n        raise TypeError(msg)\n    return backend\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.csv","title":"<code>csv</code>","text":"<p>CSV backend for flepimop2.</p>"},{"location":"reference/api/backend/#flepimop2.backend.csv.CsvBackend","title":"<code>CsvBackend(root)</code>","text":"<p>               Bases: <code>BackendABC</code></p> <p>CSV backend for saving numpy arrays to CSV files.</p> <p>Initialize the CSV backend with configuration.</p> <p>Parameters:</p> Name Type Description Default <code>root</code> <code>PathLike[str] | None</code> <p>Base output directory for CSV files.</p> required <p>Raises:</p> Type Description <code>TypeError</code> <p>If the 'root' is not a string or Path.</p> Source code in <code>src/flepimop2/backend/csv.py</code> <pre><code>def __init__(self, root: PathLike[str] | None) -&gt; None:\n    \"\"\"\n    Initialize the CSV backend with configuration.\n\n    Args:\n        root: Base output directory for CSV files.\n\n    Raises:\n        TypeError: If the 'root' is not a string or Path.\n    \"\"\"\n    base_path = Path(root) if root is not None else Path.cwd() / \"model_output\"\n    if base_path.is_file():\n        msg = \"The 'path' in backend configuration must be a directory.\"\n        raise TypeError(msg)\n    if not (base_path.exists() and os.access(base_path, os.W_OK)):\n        msg = f\"The specified 'path' does not exist or is not writable: {base_path}\"\n        raise TypeError(msg)\n    self.base_path = base_path\n</code></pre>"},{"location":"reference/api/backend/#flepimop2.backend.csv.build","title":"<code>build(root=None)</code>","text":"<p>Build a <code>CsvBackend</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>root</code> <code>PathLike[str] | None</code> <p>Base output directory for CSV files. 'module' key, which will be used to lookup the Backend module path. The module will have \"flepimop2.backends.\" prepended.</p> <code>None</code> <p>Returns:</p> Type Description <code>BackendABC</code> <p>The constructed csv backend.</p> Source code in <code>src/flepimop2/backend/csv.py</code> <pre><code>def build(root: PathLike[str] | None = None) -&gt; BackendABC:\n    \"\"\"\n    Build a `CsvBackend` from a configuration dictionary.\n\n    Args:\n        root: Base output directory for CSV files. 'module' key, which will be used to\n            lookup the Backend module path. The module will have \"flepimop2.backends.\"\n            prepended.\n\n    Returns:\n        The constructed csv backend.\n    \"\"\"\n    return CsvBackend(root)\n</code></pre>"},{"location":"reference/api/configuration/","title":"Configuration","text":""},{"location":"reference/api/configuration/#flepimop2.configuration","title":"<code>configuration</code>","text":"<p>Representations of parsed configuration files.</p>"},{"location":"reference/api/configuration/#flepimop2.configuration.ConfigurationModel","title":"<code>ConfigurationModel</code>","text":"<p>               Bases: <code>YamlSerializableBaseModel</code></p> <p>Configuration model for flepimop2.</p> <p>This model serves as the parent container for a parsed configuration file.</p> <p>Attributes:</p> Name Type Description <code>name</code> <code>str | None</code> <p>An optional name for the configuration.</p> <code>engines</code> <code>dict[str, ModuleModel]</code> <p>A dictionary of engine configurations.</p> <code>systems</code> <code>dict[str, ModuleModel]</code> <p>A dictionary of system configurations.</p> <code>backends</code> <code>dict[str, ModuleModel]</code> <p>A dictionary of backend configurations.</p> <code>process</code> <code>dict[str, ModuleModel]</code> <p>A dictionary of process configurations.</p> <code>parameters</code> <code>dict[str, ParameterSpecificationModel]</code> <p>A dictionary of parameter configurations.</p> <code>simulate</code> <code>dict[str, SimulateSpecificationModel]</code> <p>A dictionary of simulation configurations.</p>"},{"location":"reference/api/configuration/#flepimop2.configuration.FixedParameterSpecificationModel","title":"<code>FixedParameterSpecificationModel</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fixed parameter specification model.</p> <p>This model represents a parameter with a fixed value.</p> <p>Attributes:</p> Name Type Description <code>type</code> <code>Literal['fixed']</code> <p>The type of the parameter specification, fixed to \"fixed\".</p> <code>value</code> <code>float</code> <p>The fixed numeric value of the parameter.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from flepimop2.configuration import FixedParameterSpecificationModel\n&gt;&gt;&gt; param = FixedParameterSpecificationModel(value=12.34)\n&gt;&gt;&gt; param\nFixedParameterSpecificationModel(type='fixed', value=12.34)\n&gt;&gt;&gt; param.model_dump()\n12.34\n</code></pre>"},{"location":"reference/api/configuration/#flepimop2.configuration.ModuleModel","title":"<code>ModuleModel</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Module configuration model for flepimop2.</p> <p>Attributes:</p> Name Type Description <code>module</code> <code>str</code> <p>The type of the module.</p>"},{"location":"reference/api/configuration/#flepimop2.configuration.SimulateSpecificationModel","title":"<code>SimulateSpecificationModel</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Model for specifying a simulation for flepimop2.</p> <p>Attributes:</p> Name Type Description <code>engine</code> <code>str</code> <p>The name of the engine to use for the simulation.</p> <code>system</code> <code>str</code> <p>The name of the system to simulate.</p> <code>backend</code> <code>str</code> <p>The name of the backend to use for the simulation.</p> <code>times</code> <code>list[float]</code> <p>A list of time points at which to perform the simulation.</p> <code>params</code> <code>dict[str, float] | None</code> <p>Optional dictionary of parameters for the simulation.</p>"},{"location":"reference/api/engine/","title":"Engine","text":""},{"location":"reference/api/engine/#flepimop2.engine","title":"<code>engine</code>","text":"<p>Abstract class for Engines to evolve Dynamic Systems.</p>"},{"location":"reference/api/engine/#flepimop2.engine.EngineABC","title":"<code>EngineABC(runner=_no_run_func)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract class for Engines to evolve Dynamic Systems.</p> <p>Initialize an <code>EngineABC</code> from a runner function.</p> <p>Parameters:</p> Name Type Description Default <code>runner</code> <code>EngineProtocol</code> <p>The runner function for the engine. Defaults to a function that raises <code>NotImplementedError</code>.</p> <code>_no_run_func</code> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def __init__(self, runner: EngineProtocol = _no_run_func) -&gt; None:\n    \"\"\"\n    Initialize an `EngineABC` from a runner function.\n\n    Args:\n        runner: The runner function for the engine. Defaults to a function that\n            raises `NotImplementedError`.\n    \"\"\"\n    self._runner = runner\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.EngineABC.run","title":"<code>run(system, eval_times, initial_state, params, **kwargs)</code>","text":"<p>Run the engine with the provided system and parameters.</p> <p>Parameters:</p> Name Type Description Default <code>system</code> <code>SystemABC</code> <p>The dynamic system to be evolved.</p> required <code>eval_times</code> <code>NDArray[float64]</code> <p>Array of time points for evaluation.</p> required <code>initial_state</code> <code>NDArray[float64]</code> <p>The initial state array.</p> required <code>params</code> <code>dict[str, Any]</code> <p>Additional parameters for the stepper.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the engine.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The evolved time x state array.</p> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def run(\n    self,\n    system: SystemABC,\n    eval_times: NDArray[np.float64],\n    initial_state: NDArray[np.float64],\n    params: dict[str, Any],\n    **kwargs: Any,\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Run the engine with the provided system and parameters.\n\n    Args:\n        system: The dynamic system to be evolved.\n        eval_times: Array of time points for evaluation.\n        initial_state: The initial state array.\n        params: Additional parameters for the stepper.\n        **kwargs: Additional keyword arguments for the engine.\n\n    Returns:\n        The evolved time x state array.\n    \"\"\"\n    return self._runner(\n        system.stepper,\n        eval_times,\n        initial_state,\n        params,\n        **kwargs,\n    )\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.EngineProtocol","title":"<code>EngineProtocol</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Type-definition (Protocol) for engine runner functions.</p>"},{"location":"reference/api/engine/#flepimop2.engine.EngineProtocol.__call__","title":"<code>__call__(stepper, times, state, params, **kwargs)</code>","text":"<p>Protocol for engine runner functions.</p> <p>Parameters:</p> Name Type Description Default <code>stepper</code> <code>SystemProtocol</code> <p>The system stepper function.</p> required <code>times</code> <code>NDArray[float64]</code> <p>Array of time points.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>params</code> <code>dict[str, Any]</code> <p>Additional parameters for the stepper.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the engine.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The evolved time x state array.</p> Source code in <code>src/flepimop2/engine/protocol.py</code> <pre><code>def __call__(\n    self,\n    stepper: SystemProtocol,\n    times: NDArray[np.float64],\n    state: NDArray[np.float64],\n    params: dict[str, Any],\n    **kwargs: Any,\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Protocol for engine runner functions.\n\n    Args:\n        stepper: The system stepper function.\n        times: Array of time points.\n        state: The current state array.\n        params: Additional parameters for the stepper.\n        **kwargs: Additional keyword arguments for the engine.\n\n    Returns:\n        The evolved time x state array.\n    \"\"\"\n    ...\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.build","title":"<code>build(config)</code>","text":"<p>Build a <code>EngineABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | EngineProtocol</code> <p>Configuration dictionary or a EngineProtocol. In dict mode, it contains a 'module' key, it will be used to lookup the Engine module path. The module will have \"flepimop2.engine.\" prepended.</p> required <p>Returns:</p> Type Description <code>EngineABC</code> <p>The constructed engine instance.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built engine is not an instance of EngineABC.</p> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def build(config: dict[str, Any] | EngineProtocol) -&gt; EngineABC:\n    \"\"\"Build a `EngineABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary or a EngineProtocol. In dict mode, it contains\n            a 'module' key, it will be used to lookup the Engine module path. The module\n            will have \"flepimop2.engine.\" prepended.\n\n    Returns:\n        The constructed engine instance.\n\n    Raises:\n        TypeError: If the built engine is not an instance of EngineABC.\n    \"\"\"\n    if isinstance(config, EngineProtocol):\n        return EngineABC(config)\n    builder = _load_builder(f\"flepimop2.engine.{config.pop('module', 'wrapper')}\")\n    engine = builder.build(**config)\n    if not isinstance(engine, EngineABC):\n        msg = \"The built engine is not an instance of EngineABC.\"\n        raise TypeError(msg)\n    return engine\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.abc","title":"<code>abc</code>","text":"<p>Abstract class for Engines to evolve Dynamic Systems.</p>"},{"location":"reference/api/engine/#flepimop2.engine.abc.EngineABC","title":"<code>EngineABC(runner=_no_run_func)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract class for Engines to evolve Dynamic Systems.</p> <p>Initialize an <code>EngineABC</code> from a runner function.</p> <p>Parameters:</p> Name Type Description Default <code>runner</code> <code>EngineProtocol</code> <p>The runner function for the engine. Defaults to a function that raises <code>NotImplementedError</code>.</p> <code>_no_run_func</code> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def __init__(self, runner: EngineProtocol = _no_run_func) -&gt; None:\n    \"\"\"\n    Initialize an `EngineABC` from a runner function.\n\n    Args:\n        runner: The runner function for the engine. Defaults to a function that\n            raises `NotImplementedError`.\n    \"\"\"\n    self._runner = runner\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.abc.EngineABC.run","title":"<code>run(system, eval_times, initial_state, params, **kwargs)</code>","text":"<p>Run the engine with the provided system and parameters.</p> <p>Parameters:</p> Name Type Description Default <code>system</code> <code>SystemABC</code> <p>The dynamic system to be evolved.</p> required <code>eval_times</code> <code>NDArray[float64]</code> <p>Array of time points for evaluation.</p> required <code>initial_state</code> <code>NDArray[float64]</code> <p>The initial state array.</p> required <code>params</code> <code>dict[str, Any]</code> <p>Additional parameters for the stepper.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the engine.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The evolved time x state array.</p> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def run(\n    self,\n    system: SystemABC,\n    eval_times: NDArray[np.float64],\n    initial_state: NDArray[np.float64],\n    params: dict[str, Any],\n    **kwargs: Any,\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Run the engine with the provided system and parameters.\n\n    Args:\n        system: The dynamic system to be evolved.\n        eval_times: Array of time points for evaluation.\n        initial_state: The initial state array.\n        params: Additional parameters for the stepper.\n        **kwargs: Additional keyword arguments for the engine.\n\n    Returns:\n        The evolved time x state array.\n    \"\"\"\n    return self._runner(\n        system.stepper,\n        eval_times,\n        initial_state,\n        params,\n        **kwargs,\n    )\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.abc.build","title":"<code>build(config)</code>","text":"<p>Build a <code>EngineABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | EngineProtocol</code> <p>Configuration dictionary or a EngineProtocol. In dict mode, it contains a 'module' key, it will be used to lookup the Engine module path. The module will have \"flepimop2.engine.\" prepended.</p> required <p>Returns:</p> Type Description <code>EngineABC</code> <p>The constructed engine instance.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built engine is not an instance of EngineABC.</p> Source code in <code>src/flepimop2/engine/abc.py</code> <pre><code>def build(config: dict[str, Any] | EngineProtocol) -&gt; EngineABC:\n    \"\"\"Build a `EngineABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary or a EngineProtocol. In dict mode, it contains\n            a 'module' key, it will be used to lookup the Engine module path. The module\n            will have \"flepimop2.engine.\" prepended.\n\n    Returns:\n        The constructed engine instance.\n\n    Raises:\n        TypeError: If the built engine is not an instance of EngineABC.\n    \"\"\"\n    if isinstance(config, EngineProtocol):\n        return EngineABC(config)\n    builder = _load_builder(f\"flepimop2.engine.{config.pop('module', 'wrapper')}\")\n    engine = builder.build(**config)\n    if not isinstance(engine, EngineABC):\n        msg = \"The built engine is not an instance of EngineABC.\"\n        raise TypeError(msg)\n    return engine\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.protocol","title":"<code>protocol</code>","text":"<p>Type-definition (Protocol) for engine runner functions.</p>"},{"location":"reference/api/engine/#flepimop2.engine.protocol.EngineProtocol","title":"<code>EngineProtocol</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Type-definition (Protocol) for engine runner functions.</p>"},{"location":"reference/api/engine/#flepimop2.engine.protocol.EngineProtocol.__call__","title":"<code>__call__(stepper, times, state, params, **kwargs)</code>","text":"<p>Protocol for engine runner functions.</p> <p>Parameters:</p> Name Type Description Default <code>stepper</code> <code>SystemProtocol</code> <p>The system stepper function.</p> required <code>times</code> <code>NDArray[float64]</code> <p>Array of time points.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>params</code> <code>dict[str, Any]</code> <p>Additional parameters for the stepper.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the engine.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The evolved time x state array.</p> Source code in <code>src/flepimop2/engine/protocol.py</code> <pre><code>def __call__(\n    self,\n    stepper: SystemProtocol,\n    times: NDArray[np.float64],\n    state: NDArray[np.float64],\n    params: dict[str, Any],\n    **kwargs: Any,\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Protocol for engine runner functions.\n\n    Args:\n        stepper: The system stepper function.\n        times: Array of time points.\n        state: The current state array.\n        params: Additional parameters for the stepper.\n        **kwargs: Additional keyword arguments for the engine.\n\n    Returns:\n        The evolved time x state array.\n    \"\"\"\n    ...\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.wrapper","title":"<code>wrapper</code>","text":"<p>A <code>EngineABC</code> which wraps a user-defined script file.</p>"},{"location":"reference/api/engine/#flepimop2.engine.wrapper.WrapperEngine","title":"<code>WrapperEngine(script)</code>","text":"<p>               Bases: <code>EngineABC</code></p> <p>A <code>EngineABC</code> which wraps a user-defined script file.</p> <p>Initialize a <code>WrapperEngine</code> from a script file.</p> <p>Parameters:</p> Name Type Description Default <code>script</code> <code>PathLike[str]</code> <p>Path to a script file which defines a 'runner' function.</p> required <p>Raises:</p> Type Description <code>AttributeError</code> <p>If the module does not have a valid 'runner' function.</p> Source code in <code>src/flepimop2/engine/wrapper.py</code> <pre><code>def __init__(self, script: PathLike[str]) -&gt; None:\n    \"\"\"\n    Initialize a `WrapperEngine` from a script file.\n\n    Args:\n        script: Path to a script file which defines a 'runner' function.\n\n    Raises:\n        AttributeError: If the module does not have a valid 'runner' function.\n    \"\"\"\n    mod = _load_module(script, \"flepimop2.engine.wrapped\")\n    if not _validate_function(mod, \"runner\"):\n        msg = f\"Module at {script} does not have a valid 'runner' function.\"\n        raise AttributeError(msg)\n    super().__init__(mod.runner)\n</code></pre>"},{"location":"reference/api/engine/#flepimop2.engine.wrapper.build","title":"<code>build(script)</code>","text":"<p>Build a <code>WrapperEngine</code> from a configuration arguments.</p> <p>Parameters:</p> Name Type Description Default <code>script</code> <code>PathLike[str]</code> <p>Path to a script file which defines a 'runner' function.</p> required <p>Returns:</p> Type Description <code>WrapperEngine</code> <p>The constructed wrapper engine instance.</p> Source code in <code>src/flepimop2/engine/wrapper.py</code> <pre><code>def build(script: PathLike[str]) -&gt; WrapperEngine:\n    \"\"\"\n    Build a `WrapperEngine` from a configuration arguments.\n\n    Args:\n        script: Path to a script file which defines a 'runner' function.\n\n    Returns:\n        The constructed wrapper engine instance.\n    \"\"\"\n    return WrapperEngine(script)\n</code></pre>"},{"location":"reference/api/logging/","title":"Logging","text":""},{"location":"reference/api/logging/#flepimop2.logging","title":"<code>logging</code>","text":"<p>Logging utilities for consistent script output.</p> <p>This module provides functionality for creating consistent outputs from CLI tools provided by this package.</p>"},{"location":"reference/api/logging/#flepimop2.logging.ClickHandler","title":"<code>ClickHandler(level=0, file=None, *, nl=True, err=False, color=None, punctuate=True)</code>","text":"<p>               Bases: <code>Handler</code></p> <p>Custom logging handler specifically for click based CLI tools.</p> <p>Initialize an instance of the click handler.</p> <p>Parameters:</p> Name Type Description Default <code>level</code> <code>int | str</code> <p>The logging level to use for this handler.</p> <code>0</code> <code>file</code> <code>IO[Any] | None</code> <p>The file to write to. Defaults to stdout.</p> <code>None</code> <code>nl</code> <code>bool</code> <p>Print a newline after the message. Enabled by default.</p> <code>True</code> <code>err</code> <code>bool</code> <p>Write to stderr instead of stdout.</p> <code>False</code> <code>color</code> <code>bool | None</code> <p>Force showing or hiding colors and other styles. By default click will remove color if the output does not look like an interactive terminal.</p> <code>None</code> <code>punctuate</code> <code>bool</code> <p>A boolean indicating if punctuation should be added to the end of a log message provided if missing.</p> <code>True</code> Notes <p>For more details on the <code>file</code>, <code>nl</code>, <code>err</code>, and <code>color</code> args please refer to <code>click.echo</code>.</p> Source code in <code>src/flepimop2/logging.py</code> <pre><code>def __init__(  # noqa: PLR0913\n    self,\n    level: int | str = 0,\n    file: IO[Any] | None = None,\n    *,\n    nl: bool = True,\n    err: bool = False,\n    color: bool | None = None,\n    punctuate: bool = True,\n) -&gt; None:\n    \"\"\"\n    Initialize an instance of the click handler.\n\n    Args:\n        level: The logging level to use for this handler.\n        file: The file to write to. Defaults to stdout.\n        nl: Print a newline after the message. Enabled by default.\n        err: Write to stderr instead of stdout.\n        color: Force showing or hiding colors and other styles. By default click\n            will remove color if the output does not look like an interactive\n            terminal.\n        punctuate: A boolean indicating if punctuation should be added to the end\n            of a log message provided if missing.\n\n    Notes:\n        For more details on the `file`, `nl`, `err`, and `color` args please refer\n        to [`click.echo`](https://click.palletsprojects.com/en/8.1.x/api/#click.echo).\n    \"\"\"\n    super().__init__(level)\n    self._file = file\n    self._nl = nl\n    self._err = err\n    self._color = color\n    self._punctuate = punctuate\n</code></pre>"},{"location":"reference/api/logging/#flepimop2.logging.ClickHandler.emit","title":"<code>emit(record)</code>","text":"<p>Emit a given log record via <code>click.echo</code>.</p> <p>Parameters:</p> Name Type Description Default <code>record</code> <code>LogRecord</code> <p>The log record to output.</p> required See Also <p><code>logging.Handler.emit</code>.</p> Source code in <code>src/flepimop2/logging.py</code> <pre><code>def emit(self, record: logging.LogRecord) -&gt; None:\n    \"\"\"\n    Emit a given log record via `click.echo`.\n\n    Args:\n        record: The log record to output.\n\n    See Also:\n        [`logging.Handler.emit`](https://docs.python.org/3/library/logging.html#logging.Handler.emit).\n    \"\"\"\n    msg = self.format(record)\n    msg = f\"{msg}.\" if self._punctuate and not msg.endswith(_PUNCTUATION) else msg\n    click.echo(\n        message=msg, file=self._file, nl=self._nl, err=self._err, color=self._color\n    )\n</code></pre>"},{"location":"reference/api/logging/#flepimop2.logging.LoggingLevel","title":"<code>LoggingLevel</code>","text":"<p>               Bases: <code>IntEnum</code></p> <p>An enumeration of the logging levels used in this package.</p> <p>Attributes:</p> Name Type Description <code>DEBUG</code> <p>Detailed information, typically of interest only when diagnosing problems.</p> <code>INFO</code> <p>Confirmation that things are working as expected.</p> <code>WARNING</code> <p>An indication that something unexpected happened, or indicative of some problem in the near future (e.g., 'ode unstable'). The software is still working as expected.</p> <code>ERROR</code> <p>Due to a more serious problem, the software has not been able to perform some function.</p> <code>CRITICAL</code> <p>A serious error, indicating that the program itself may be unable to continue running.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from flepimop2.logging import LoggingLevel\n&gt;&gt;&gt; LoggingLevel.DEBUG\n&lt;LoggingLevel.DEBUG: 10&gt;\n&gt;&gt;&gt; LoggingLevel.from_verbosity(2)\n&lt;LoggingLevel.INFO: 20&gt;\n&gt;&gt;&gt; LoggingLevel.from_verbosity(LoggingLevel.ERROR)\n&lt;LoggingLevel.ERROR: 40&gt;\n</code></pre>"},{"location":"reference/api/logging/#flepimop2.logging.LoggingLevel.from_verbosity","title":"<code>from_verbosity(verbosity)</code>  <code>classmethod</code>","text":"<p>Convert a verbosity level to a <code>LoggingLevel</code>.</p> <p>Parameters:</p> Name Type Description Default <code>verbosity</code> <code>int | LoggingLevel</code> <p>The verbosity level to convert.</p> required <p>Returns:</p> Type Description <code>LoggingLevel</code> <p>The corresponding <code>LoggingLevel</code>.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If <code>verbosity</code> is negative.</p> Source code in <code>src/flepimop2/logging.py</code> <pre><code>@classmethod\ndef from_verbosity(cls, verbosity: \"int | LoggingLevel\") -&gt; \"LoggingLevel\":\n    \"\"\"\n    Convert a verbosity level to a `LoggingLevel`.\n\n    Args:\n        verbosity: The verbosity level to convert.\n\n    Returns:\n        The corresponding `LoggingLevel`.\n\n    Raises:\n        ValueError: If `verbosity` is negative.\n    \"\"\"\n    if isinstance(verbosity, cls):\n        return verbosity\n    if verbosity &lt; 0:\n        msg = f\"`verbosity` must be non-negative, was given '{verbosity}'.\"\n        raise ValueError(msg)\n    if verbosity in set(cls):\n        return cls(verbosity)\n    return cls(_VERBOSITY_TO_LOGGING_LEVEL.get(verbosity, logging.DEBUG))\n</code></pre>"},{"location":"reference/api/logging/#flepimop2.logging.get_script_logger","title":"<code>get_script_logger(name, verbosity, handler=None, log_format=DEFAULT_LOG_FORMAT)</code>","text":"<p>Create a logger for use in scripts/CLI tools.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>The name to display in the log message, useful for locating the source of logging messages. Almost always <code>__name__</code>.</p> required <code>verbosity</code> <code>int</code> <p>A non-negative integer for the verbosity level.</p> required <code>handler</code> <code>Handler | None</code> <p>An optional logging handler to use in creating the logger returned, or <code>None</code> to just use the <code>ClickHandler</code>.</p> <code>None</code> <code>log_format</code> <code>str</code> <p>The format to use for logged messages. Passed directly to the <code>fmt</code> argument of logging.Formatter.</p> <code>DEFAULT_LOG_FORMAT</code> <p>Returns:</p> Type Description <code>Logger</code> <p>An instance of <code>logging.Logger</code> that has the appropriate level set based on</p> <code>Logger</code> <p><code>verbosity</code> and a custom handler for outputting for CLI tools.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from flepimop2.logging import get_script_logger\n&gt;&gt;&gt; logger = get_script_logger(__name__, 3)\n&gt;&gt;&gt; logger.info(\"This is a log info message\")\n2024-10-29 16:07:20,272:INFO&gt; This is a log info message.\n</code></pre> Source code in <code>src/flepimop2/logging.py</code> <pre><code>def get_script_logger(\n    name: str,\n    verbosity: int,\n    handler: logging.Handler | None = None,\n    log_format: str = DEFAULT_LOG_FORMAT,\n) -&gt; logging.Logger:\n    \"\"\"\n    Create a logger for use in scripts/CLI tools.\n\n    Args:\n        name: The name to display in the log message, useful for locating the source\n            of logging messages. Almost always `__name__`.\n        verbosity: A non-negative integer for the verbosity level.\n        handler: An optional logging handler to use in creating the logger returned, or\n            `None` to just use the `ClickHandler`.\n        log_format: The format to use for logged messages. Passed directly to the `fmt`\n            argument of [logging.Formatter](https://docs.python.org/3/library/logging.html#logging.Formatter).\n\n    Returns:\n        An instance of `logging.Logger` that has the appropriate level set based on\n        `verbosity` and a custom handler for outputting for CLI tools.\n\n    Examples:\n        &gt;&gt;&gt; from flepimop2.logging import get_script_logger\n        &gt;&gt;&gt; logger = get_script_logger(__name__, 3)\n        &gt;&gt;&gt; logger.info(\"This is a log info message\")  # doctest: +SKIP\n        2024-10-29 16:07:20,272:INFO&gt; This is a log info message.\n    \"\"\"\n    logger = logging.getLogger(name)\n    logger.setLevel(LoggingLevel.from_verbosity(verbosity))\n    handler = ClickHandler() if handler is None else handler\n    log_formatter = logging.Formatter(log_format)\n    for old_handler in logger.handlers:\n        logger.removeHandler(old_handler)\n    handler.setFormatter(log_formatter)\n    logger.addHandler(handler)\n    # pytest-dev/pytest#3697\n    logger.propagate = Path(sys.argv[0]).name == \"pytest\" if sys.argv else False\n    return logger\n</code></pre>"},{"location":"reference/api/meta/","title":"Meta","text":""},{"location":"reference/api/meta/#flepimop2.meta","title":"<code>meta</code>","text":"<p>Metadata types for flepimop2 runs.</p>"},{"location":"reference/api/meta/#flepimop2.meta.RunMeta","title":"<code>RunMeta</code>","text":"<p>               Bases: <code>NamedTuple</code></p> <p>Metadata for a flepimop2 run.</p> <p>Attributes:</p> Name Type Description <code>action</code> <code>Literal['simulate']</code> <p>The action performed in the run (e.g., \"simulate\").</p> <code>timestamp</code> <code>datetime</code> <p>The timestamp when the run was executed. Defaults to current UTC time.</p> <code>name</code> <code>str | None</code> <p>An optional name for the run, typically pulled from the config.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from flepimop2.meta import RunMeta\n&gt;&gt;&gt; run_meta = RunMeta(name=\"test_run\")\n&gt;&gt;&gt; run_meta.action\n'simulate'\n&gt;&gt;&gt; run_meta.timestamp\ndatetime.datetime(..., tzinfo=datetime.timezone.utc)\n&gt;&gt;&gt; run_meta.name\n'test_run'\n</code></pre>"},{"location":"reference/api/process/","title":"Process","text":""},{"location":"reference/api/process/#flepimop2.process","title":"<code>process</code>","text":"<p>Process module for handling processing steps in flepimop2.</p>"},{"location":"reference/api/process/#flepimop2.process.ProcessABC","title":"<code>ProcessABC()</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for flepimop2 processing steps.</p> <p>Initialize the process with the given configuration.</p> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def __init__(self) -&gt; None:  # noqa: B027\n    \"\"\"Initialize the process with the given configuration.\"\"\"\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.ProcessABC.execute","title":"<code>execute(*, dry_run=False)</code>","text":"<p>Execute a processing step.</p> <p>Parameters:</p> Name Type Description Default <code>dry_run</code> <code>bool</code> <p>If True, the process will not actually execute but will simulate execution.</p> <code>False</code> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def execute(self, *, dry_run: bool = False) -&gt; None:\n    \"\"\"\n    Execute a processing step.\n\n    Args:\n        dry_run: If True, the process will not actually execute but will simulate\n            execution.\n    \"\"\"\n    return self._process(dry_run=dry_run)\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.build","title":"<code>build(config)</code>","text":"<p>Build a <code>ProcessABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | ModuleModel</code> <p>Configuration dictionary. The dict should contain a 'module' key, which will be used to lookup the Process module path. The module will have \"flepimop2.process.\" prepended.</p> required <p>Returns:</p> Name Type Description <code>ProcessABC</code> <code>ProcessABC</code> <p>The constructed process object.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built process is not an instance of ProcessABC.</p> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def build(config: dict[str, Any] | ModuleModel) -&gt; ProcessABC:\n    \"\"\"Build a `ProcessABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary. The dict should contain a\n            'module' key, which will be used to lookup the Process module path.\n            The module will have \"flepimop2.process.\" prepended.\n\n    Returns:\n        ProcessABC: The constructed process object.\n\n    Raises:\n        TypeError: If the built process is not an instance of ProcessABC.\n    \"\"\"\n    if isinstance(config, ModuleModel):\n        config = config.model_dump()\n    module = config.pop(\"module\", \"shell\")\n    module_abs = f\"flepimop2.process.{module}\"\n    builder = _load_builder(module_abs)\n    process = builder.build(config)\n    if not isinstance(process, ProcessABC):\n        msg = \"The built process is not an instance of ProcessABC.\"\n        raise TypeError(msg)\n    return process\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.abc","title":"<code>abc</code>","text":"<p>Abstract base class for flepimop2 processing steps.</p>"},{"location":"reference/api/process/#flepimop2.process.abc.ProcessABC","title":"<code>ProcessABC()</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract base class for flepimop2 processing steps.</p> <p>Initialize the process with the given configuration.</p> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def __init__(self) -&gt; None:  # noqa: B027\n    \"\"\"Initialize the process with the given configuration.\"\"\"\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.abc.ProcessABC.execute","title":"<code>execute(*, dry_run=False)</code>","text":"<p>Execute a processing step.</p> <p>Parameters:</p> Name Type Description Default <code>dry_run</code> <code>bool</code> <p>If True, the process will not actually execute but will simulate execution.</p> <code>False</code> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def execute(self, *, dry_run: bool = False) -&gt; None:\n    \"\"\"\n    Execute a processing step.\n\n    Args:\n        dry_run: If True, the process will not actually execute but will simulate\n            execution.\n    \"\"\"\n    return self._process(dry_run=dry_run)\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.abc.build","title":"<code>build(config)</code>","text":"<p>Build a <code>ProcessABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | ModuleModel</code> <p>Configuration dictionary. The dict should contain a 'module' key, which will be used to lookup the Process module path. The module will have \"flepimop2.process.\" prepended.</p> required <p>Returns:</p> Name Type Description <code>ProcessABC</code> <code>ProcessABC</code> <p>The constructed process object.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built process is not an instance of ProcessABC.</p> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def build(config: dict[str, Any] | ModuleModel) -&gt; ProcessABC:\n    \"\"\"Build a `ProcessABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary. The dict should contain a\n            'module' key, which will be used to lookup the Process module path.\n            The module will have \"flepimop2.process.\" prepended.\n\n    Returns:\n        ProcessABC: The constructed process object.\n\n    Raises:\n        TypeError: If the built process is not an instance of ProcessABC.\n    \"\"\"\n    if isinstance(config, ModuleModel):\n        config = config.model_dump()\n    module = config.pop(\"module\", \"shell\")\n    module_abs = f\"flepimop2.process.{module}\"\n    builder = _load_builder(module_abs)\n    process = builder.build(config)\n    if not isinstance(process, ProcessABC):\n        msg = \"The built process is not an instance of ProcessABC.\"\n        raise TypeError(msg)\n    return process\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.shell","title":"<code>shell</code>","text":"<p>Shell process for flepimop2.</p>"},{"location":"reference/api/process/#flepimop2.process.shell.ShellProcess","title":"<code>ShellProcess()</code>","text":"<p>               Bases: <code>ModuleModel</code>, <code>ProcessABC</code></p> <p>Shell process for executing commands.</p> <p>Attributes:</p> Name Type Description <code>module</code> <code>Literal['shell']</code> <p>The module type, fixed to \"shell\".</p> <code>command</code> <code>str</code> <p>The shell command to execute.</p> <code>args</code> <code>list[str]</code> <p>Arguments to pass to the shell command.</p> Source code in <code>src/flepimop2/process/abc.py</code> <pre><code>def __init__(self) -&gt; None:  # noqa: B027\n    \"\"\"Initialize the process with the given configuration.\"\"\"\n</code></pre>"},{"location":"reference/api/process/#flepimop2.process.shell.build","title":"<code>build(config)</code>","text":"<p>Build a <code>ShellProcess</code> from a configuration.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any]</code> <p>Configuration dictionary to create a shell process. If module key is defined, it must be \"shell\". Must contain a 'command' key with the shell command to execute.</p> required <p>Returns:</p> Type Description <code>ShellProcess</code> <p>The ready-to-use <code>ShellProcess</code> instance.</p> Source code in <code>src/flepimop2/process/shell.py</code> <pre><code>def build(config: dict[str, Any]) -&gt; ShellProcess:\n    \"\"\"\n    Build a [`ShellProcess`][flepimop2.process.shell.ShellProcess] from a configuration.\n\n    Args:\n        config: Configuration dictionary to create a shell process. If module key is\n            defined, it must be \"shell\". Must contain a 'command' key with the shell\n            command to execute.\n\n    Returns:\n        The ready-to-use [`ShellProcess`][flepimop2.process.shell.ShellProcess]\n            instance.\n    \"\"\"\n    return ShellProcess.model_validate(config)\n</code></pre>"},{"location":"reference/api/system/","title":"System","text":""},{"location":"reference/api/system/#flepimop2.system","title":"<code>system</code>","text":"<p>Abstract class for Dynamic Systems.</p>"},{"location":"reference/api/system/#flepimop2.system.SystemABC","title":"<code>SystemABC(f=_no_step_function)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract class for Dynamic Systems.</p> <p>Initialize a <code>SystemABC</code> from a stepper function.</p> <p>Parameters:</p> Name Type Description Default <code>f</code> <code>SystemProtocol</code> <p>The stepper function for the system. Defaults to a function that raises <code>NotImplementedError</code>.</p> <code>_no_step_function</code> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def __init__(self, f: SystemProtocol = _no_step_function) -&gt; None:\n    \"\"\"\n    Initialize a `SystemABC` from a stepper function.\n\n    Args:\n        f: The stepper function for the system. Defaults to a function that\n            raises `NotImplementedError`.\n    \"\"\"\n    self.stepper = f\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.SystemABC.step","title":"<code>step(time, state, **params)</code>","text":"<p>Perform a single step of the system's dynamics.</p> <p>Parameters:</p> Name Type Description Default <code>time</code> <code>float64</code> <p>The current time.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>**params</code> <code>Any</code> <p>Additional parameters for the stepper.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The next state array after one step.</p> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def step(\n    self, time: np.float64, state: NDArray[np.float64], **params: Any\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Perform a single step of the system's dynamics.\n\n    Args:\n        time: The current time.\n        state: The current state array.\n        **params: Additional parameters for the stepper.\n\n    Returns:\n        The next state array after one step.\n    \"\"\"\n    return self.stepper(time, state, **params)\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.SystemProtocol","title":"<code>SystemProtocol</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Type-definition (Protocol) for system stepper functions.</p>"},{"location":"reference/api/system/#flepimop2.system.SystemProtocol.__call__","title":"<code>__call__(time, state, **kwargs)</code>","text":"<p>Protocol for system stepper functions.</p> <p>Parameters:</p> Name Type Description Default <code>time</code> <code>float64</code> <p>The current time.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the stepper.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The next state array after one step.</p> Source code in <code>src/flepimop2/system/protocol.py</code> <pre><code>def __call__(\n    self, time: np.float64, state: NDArray[np.float64], **kwargs: Any\n) -&gt; NDArray[np.float64]:\n    \"\"\"Protocol for system stepper functions.\n\n    Args:\n        time: The current time.\n        state: The current state array.\n        **kwargs: Additional keyword arguments for the stepper.\n\n    Returns:\n        The next state array after one step.\n    \"\"\"\n    ...\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.build","title":"<code>build(config)</code>","text":"<p>Build a <code>SystemABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | SystemProtocol</code> <p>Configuration dictionary or a SystemProtocol. In dict mode, it contains a 'module' key, it will be used to lookup the System module path. The module will have \"flepimop2.system.\" prepended.</p> required <p>Returns:</p> Type Description <code>SystemABC</code> <p>The constructed system.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built system is not an instance of SystemABC.</p> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def build(config: dict[str, Any] | SystemProtocol) -&gt; SystemABC:\n    \"\"\"\n    Build a `SystemABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary or a SystemProtocol. In dict mode, it contains\n            a 'module' key, it will be used to lookup the System module path. The module\n            will have \"flepimop2.system.\" prepended.\n\n    Returns:\n        The constructed system.\n\n    Raises:\n        TypeError: If the built system is not an instance of SystemABC.\n    \"\"\"\n    if isinstance(config, SystemProtocol):\n        return SystemABC(config)\n    builder = _load_builder(f\"flepimop2.system.{config.pop('module', 'wrapper')}\")\n    system = builder.build(**config)\n    if not isinstance(system, SystemABC):\n        msg = \"The built system is not an instance of SystemABC.\"\n        raise TypeError(msg)\n    return system\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.abc","title":"<code>abc</code>","text":"<p>Abstract class for Dynamic Systems.</p>"},{"location":"reference/api/system/#flepimop2.system.abc.SystemABC","title":"<code>SystemABC(f=_no_step_function)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Abstract class for Dynamic Systems.</p> <p>Initialize a <code>SystemABC</code> from a stepper function.</p> <p>Parameters:</p> Name Type Description Default <code>f</code> <code>SystemProtocol</code> <p>The stepper function for the system. Defaults to a function that raises <code>NotImplementedError</code>.</p> <code>_no_step_function</code> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def __init__(self, f: SystemProtocol = _no_step_function) -&gt; None:\n    \"\"\"\n    Initialize a `SystemABC` from a stepper function.\n\n    Args:\n        f: The stepper function for the system. Defaults to a function that\n            raises `NotImplementedError`.\n    \"\"\"\n    self.stepper = f\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.abc.SystemABC.step","title":"<code>step(time, state, **params)</code>","text":"<p>Perform a single step of the system's dynamics.</p> <p>Parameters:</p> Name Type Description Default <code>time</code> <code>float64</code> <p>The current time.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>**params</code> <code>Any</code> <p>Additional parameters for the stepper.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The next state array after one step.</p> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def step(\n    self, time: np.float64, state: NDArray[np.float64], **params: Any\n) -&gt; NDArray[np.float64]:\n    \"\"\"\n    Perform a single step of the system's dynamics.\n\n    Args:\n        time: The current time.\n        state: The current state array.\n        **params: Additional parameters for the stepper.\n\n    Returns:\n        The next state array after one step.\n    \"\"\"\n    return self.stepper(time, state, **params)\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.abc.build","title":"<code>build(config)</code>","text":"<p>Build a <code>SystemABC</code> from a configuration dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>dict[str, Any] | SystemProtocol</code> <p>Configuration dictionary or a SystemProtocol. In dict mode, it contains a 'module' key, it will be used to lookup the System module path. The module will have \"flepimop2.system.\" prepended.</p> required <p>Returns:</p> Type Description <code>SystemABC</code> <p>The constructed system.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the built system is not an instance of SystemABC.</p> Source code in <code>src/flepimop2/system/abc.py</code> <pre><code>def build(config: dict[str, Any] | SystemProtocol) -&gt; SystemABC:\n    \"\"\"\n    Build a `SystemABC` from a configuration dictionary.\n\n    Args:\n        config: Configuration dictionary or a SystemProtocol. In dict mode, it contains\n            a 'module' key, it will be used to lookup the System module path. The module\n            will have \"flepimop2.system.\" prepended.\n\n    Returns:\n        The constructed system.\n\n    Raises:\n        TypeError: If the built system is not an instance of SystemABC.\n    \"\"\"\n    if isinstance(config, SystemProtocol):\n        return SystemABC(config)\n    builder = _load_builder(f\"flepimop2.system.{config.pop('module', 'wrapper')}\")\n    system = builder.build(**config)\n    if not isinstance(system, SystemABC):\n        msg = \"The built system is not an instance of SystemABC.\"\n        raise TypeError(msg)\n    return system\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.protocol","title":"<code>protocol</code>","text":"<p>Type-definition (Protocol) for system stepper functions.</p>"},{"location":"reference/api/system/#flepimop2.system.protocol.SystemProtocol","title":"<code>SystemProtocol</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Type-definition (Protocol) for system stepper functions.</p>"},{"location":"reference/api/system/#flepimop2.system.protocol.SystemProtocol.__call__","title":"<code>__call__(time, state, **kwargs)</code>","text":"<p>Protocol for system stepper functions.</p> <p>Parameters:</p> Name Type Description Default <code>time</code> <code>float64</code> <p>The current time.</p> required <code>state</code> <code>NDArray[float64]</code> <p>The current state array.</p> required <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments for the stepper.</p> <code>{}</code> <p>Returns:</p> Type Description <code>NDArray[float64]</code> <p>The next state array after one step.</p> Source code in <code>src/flepimop2/system/protocol.py</code> <pre><code>def __call__(\n    self, time: np.float64, state: NDArray[np.float64], **kwargs: Any\n) -&gt; NDArray[np.float64]:\n    \"\"\"Protocol for system stepper functions.\n\n    Args:\n        time: The current time.\n        state: The current state array.\n        **kwargs: Additional keyword arguments for the stepper.\n\n    Returns:\n        The next state array after one step.\n    \"\"\"\n    ...\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.wrapper","title":"<code>wrapper</code>","text":"<p>A <code>SystemABC</code> which wraps a user-defined script file.</p>"},{"location":"reference/api/system/#flepimop2.system.wrapper.WrapperSystem","title":"<code>WrapperSystem(script)</code>","text":"<p>               Bases: <code>SystemABC</code></p> <p>A <code>SystemABC</code> which wraps a user-defined script file.</p> <p>Initialize a <code>WrapperSystem</code> from a script file.</p> <p>Parameters:</p> Name Type Description Default <code>script</code> <code>PathLike[str]</code> <p>Path to a script file which defines a 'stepper' function.</p> required <p>Raises:</p> Type Description <code>AttributeError</code> <p>If the module does not have a valid 'stepper' function.</p> Source code in <code>src/flepimop2/system/wrapper.py</code> <pre><code>def __init__(self, script: PathLike[str]) -&gt; None:\n    \"\"\"\n    Initialize a `WrapperSystem` from a script file.\n\n    Args:\n        script: Path to a script file which defines a 'stepper' function.\n\n    Raises:\n        AttributeError: If the module does not have a valid 'stepper' function.\n    \"\"\"\n    mod = _load_module(script, \"flepimop2.system.wrapped\")\n    if not _validate_function(mod, \"stepper\"):\n        msg = f\"Module at {script} does not have a valid 'stepper' function.\"\n        raise AttributeError(msg)\n    super().__init__(mod.stepper)\n</code></pre>"},{"location":"reference/api/system/#flepimop2.system.wrapper.build","title":"<code>build(script)</code>","text":"<p>Build a <code>WrapperSystem</code> from a configuration arguments.</p> <p>Parameters:</p> Name Type Description Default <code>script</code> <code>PathLike[str]</code> <p>Path to a script file which defines a 'stepper' function.</p> required <p>Returns:</p> Type Description <code>WrapperSystem</code> <p>The constructed wrapper system instance.</p> Source code in <code>src/flepimop2/system/wrapper.py</code> <pre><code>def build(script: PathLike[str]) -&gt; WrapperSystem:\n    \"\"\"\n    Build a `WrapperSystem` from a configuration arguments.\n\n    Args:\n        script: Path to a script file which defines a 'stepper' function.\n\n    Returns:\n        The constructed wrapper system instance.\n    \"\"\"\n    return WrapperSystem(script)\n</code></pre>"}]}